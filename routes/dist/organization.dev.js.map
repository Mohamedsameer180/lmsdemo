{"version":3,"sources":["organization.js"],"names":["express","require","router","Router","body","verifyToken","requireAdmin","organizationController","upload","get","getSettings","put","optional","isLength","min","max","trim","isEmail","normalizeEmail","isIn","matches","isInt","updateSettings","post","single","uploadLogo","getLogo","module","exports"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAf;;eACiBF,OAAO,CAAC,mBAAD,C;IAAhBG,I,YAAAA,I;;gBAC8BH,OAAO,CAAC,oBAAD,C;IAArCI,W,aAAAA,W;IAAaC,Y,aAAAA,Y;;AACrB,IAAMC,sBAAsB,GAAGN,OAAO,CAAC,uCAAD,CAAtC;;AACA,IAAMO,MAAM,GAAGP,OAAO,CAAC,qBAAD,CAAtB,C,CAEA;;;AACAC,MAAM,CAACO,GAAP,CAAW,WAAX,EAAwBJ,WAAxB,EAAqCE,sBAAsB,CAACG,WAA5D,E,CAEA;;AACAR,MAAM,CAACS,GAAP,CACE,WADF,EAEEN,WAFF,EAGEC,YAHF,EAIE,CACEF,IAAI,CAAC,MAAD,CAAJ,CAAaQ,QAAb,GAAwBC,QAAxB,CAAiC;AAAEC,EAAAA,GAAG,EAAE,CAAP;AAAUC,EAAAA,GAAG,EAAE;AAAf,CAAjC,EAAuDC,IAAvD,EADF,EAEEZ,IAAI,CAAC,aAAD,CAAJ,CAAoBQ,QAApB,GAA+BC,QAA/B,CAAwC;AAAEC,EAAAA,GAAG,EAAE,EAAP;AAAWC,EAAAA,GAAG,EAAE;AAAhB,CAAxC,EAAgEC,IAAhE,EAFF,EAGEZ,IAAI,CAAC,eAAD,CAAJ,CAAsBQ,QAAtB,GAAiCK,OAAjC,GAA2CC,cAA3C,EAHF,EAIEd,IAAI,CAAC,eAAD,CAAJ,CAAsBQ,QAAtB,GAAiCC,QAAjC,CAA0C;AAAEC,EAAAA,GAAG,EAAE,EAAP;AAAWC,EAAAA,GAAG,EAAE;AAAhB,CAA1C,CAJF,EAKEX,IAAI,CAAC,UAAD,CAAJ,CAAiBQ,QAAjB,GAA4BO,IAA5B,CAAiC,CAC/B,KAD+B,EACxB,kBADwB,EACJ,qBADI,EACmB,iBADnB,EAE/B,eAF+B,EAEd,cAFc,EAEE,YAFF,EAEgB,eAFhB,EAG/B,cAH+B,EAGf,kBAHe,CAAjC,CALF,EAUEf,IAAI,CAAC,QAAD,CAAJ,CAAeQ,QAAf,GAA0BO,IAA1B,CAA+B,CAAC,OAAD,EAAU,OAAV,EAAmB,OAAnB,EAA4B,OAA5B,EAAqC,OAArC,EAA8C,OAA9C,EAAuD,OAAvD,CAA/B,CAVF,EAWEf,IAAI,CAAC,uBAAD,CAAJ,CAA8BQ,QAA9B,GAAyCQ,OAAzC,CAAiD,oCAAjD,CAXF,EAYEhB,IAAI,CAAC,yBAAD,CAAJ,CAAgCQ,QAAhC,GAA2CQ,OAA3C,CAAmD,oCAAnD,CAZF,EAaEhB,IAAI,CAAC,0BAAD,CAAJ,CAAiCQ,QAAjC,GAA4CQ,OAA5C,CAAoD,oCAApD,CAbF,EAcEhB,IAAI,CAAC,mCAAD,CAAJ,CAA0CQ,QAA1C,GAAqDS,KAArD,CAA2D;AAAEP,EAAAA,GAAG,EAAE,CAAP;AAAUC,EAAAA,GAAG,EAAE;AAAf,CAA3D,CAdF,EAeEX,IAAI,CAAC,gCAAD,CAAJ,CAAuCQ,QAAvC,GAAkDS,KAAlD,CAAwD;AAAEP,EAAAA,GAAG,EAAE,CAAP;AAAUC,EAAAA,GAAG,EAAE;AAAf,CAAxD,CAfF,CAJF,EAqBER,sBAAsB,CAACe,cArBzB,E,CAwBA;;AACApB,MAAM,CAACqB,IAAP,CACE,OADF,EAEElB,WAFF,EAGEC,YAHF,EAIEE,MAAM,CAACgB,MAAP,CAAc,MAAd,CAJF,EAKEjB,sBAAsB,CAACkB,UALzB,E,CAQA;;AACAvB,MAAM,CAACO,GAAP,CAAW,iBAAX,EAA8BF,sBAAsB,CAACmB,OAArD;AAEAC,MAAM,CAACC,OAAP,GAAiB1B,MAAjB","sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\nconst { body } = require('express-validator');\r\nconst { verifyToken, requireAdmin } = require('../middleware/auth');\r\nconst organizationController = require('../controllers/organizationController');\r\nconst upload = require('../utils/fileUpload');\r\n\r\n// @route   GET /api/organization/settings\r\nrouter.get('/settings', verifyToken, organizationController.getSettings);\r\n\r\n// @route   PUT /api/organization/settings\r\nrouter.put(\r\n  '/settings',\r\n  verifyToken,\r\n  requireAdmin,\r\n  [\r\n    body('name').optional().isLength({ min: 3, max: 100 }).trim(),\r\n    body('description').optional().isLength({ min: 10, max: 1000 }).trim(),\r\n    body('contact.email').optional().isEmail().normalizeEmail(),\r\n    body('contact.phone').optional().isLength({ min: 10, max: 20 }),\r\n    body('timezone').optional().isIn([\r\n      'UTC', 'America/New_York', 'America/Los_Angeles', 'America/Chicago',\r\n      'Europe/London', 'Europe/Paris', 'Asia/Tokyo', 'Asia/Shanghai',\r\n      'Asia/Kolkata', 'Australia/Sydney'\r\n    ]),\r\n    body('locale').optional().isIn(['en-US', 'en-GB', 'es-ES', 'fr-FR', 'de-DE', 'ja-JP', 'zh-CN']),\r\n    body('branding.primaryColor').optional().matches(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/),\r\n    body('branding.secondaryColor').optional().matches(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/),\r\n    body('branding.backgroundColor').optional().matches(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/),\r\n    body('policies.assessmentPassPercentage').optional().isInt({ min: 0, max: 100 }),\r\n    body('policies.assessmentMaxAttempts').optional().isInt({ min: 1, max: 10 })\r\n  ],\r\n  organizationController.updateSettings\r\n);\r\n\r\n// @route   POST /api/organization/logo\r\nrouter.post(\r\n  '/logo',\r\n  verifyToken,\r\n  requireAdmin,\r\n  upload.single('logo'),\r\n  organizationController.uploadLogo\r\n);\r\n\r\n// @route   GET /api/organization/logo/:filename\r\nrouter.get('/logo/:filename', organizationController.getLogo);\r\n\r\nmodule.exports = router;"],"file":"organization.dev.js"}