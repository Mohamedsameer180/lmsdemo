{"version":3,"sources":["Organization.js"],"names":["mongoose","require","organizationSchema","Schema","name","type","String","required","trim","maxlength","description","contact","email","match","phone","address","timezone","locale","branding","logo","filename","path","uploadedAt","Date","primaryColor","secondaryColor","backgroundColor","fontFamily","policies","courseAccess","assessmentPassPercentage","Number","min","max","assessmentMaxAttempts","certificationValidityMonths","certificationRenewalRequired","Boolean","learningDeadlineDays","complianceRequired","version","lastModifiedBy","Types","ObjectId","ref","timestamps","versionKey","pre","next","isNew","module","exports","model"],"mappings":"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","sourcesContent":["const mongoose = require('mongoose');\r\n\r\nconst organizationSchema = new mongoose.Schema({\r\n  name: {\r\n    type: String,\r\n    required: [true, 'Organization name is required'],\r\n    trim: true,\r\n    maxlength: [100, 'Name cannot exceed 100 characters']\r\n  },\r\n  description: {\r\n    type: String,\r\n    required: [true, 'Description is required'],\r\n    maxlength: [1000, 'Description cannot exceed 1000 characters']\r\n  },\r\n  contact: {\r\n    email: {\r\n      type: String,\r\n      required: [true, 'Contact email is required'],\r\n      match: [/^\\S+@\\S+\\.\\S+$/, 'Please provide a valid email']\r\n    },\r\n    phone: {\r\n      type: String,\r\n      required: [true, 'Contact phone is required'],\r\n      match: [/^[\\d\\s\\-\\+\\(\\)]+$/, 'Please provide a valid phone number']\r\n    },\r\n    address: {\r\n      type: String,\r\n      required: [true, 'Address is required'],\r\n      maxlength: [500, 'Address cannot exceed 500 characters']\r\n    }\r\n  },\r\n  timezone: {\r\n    type: String,\r\n    default: 'UTC',\r\n    enum: [\r\n      'UTC', 'America/New_York', 'America/Los_Angeles', 'America/Chicago',\r\n      'Europe/London', 'Europe/Paris', 'Asia/Tokyo', 'Asia/Shanghai',\r\n      'Asia/Kolkata', 'Australia/Sydney'\r\n    ]\r\n  },\r\n  locale: {\r\n    type: String,\r\n    default: 'en-US',\r\n    enum: ['en-US', 'en-GB', 'es-ES', 'fr-FR', 'de-DE', 'ja-JP', 'zh-CN']\r\n  },\r\n  branding: {\r\n    logo: {\r\n      filename: String,\r\n      path: String,\r\n      uploadedAt: Date\r\n    },\r\n    primaryColor: {\r\n      type: String,\r\n      required: true,\r\n      match: [/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/, 'Invalid hex color']\r\n    },\r\n    secondaryColor: {\r\n      type: String,\r\n      required: true,\r\n      match: [/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/, 'Invalid hex color']\r\n    },\r\n    backgroundColor: {\r\n      type: String,\r\n      required: true,\r\n      match: [/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/, 'Invalid hex color']\r\n    },\r\n    fontFamily: {\r\n      type: String,\r\n      required: true,\r\n      enum: [\r\n        'Roboto, sans-serif', 'Open Sans, sans-serif', 'Lato, sans-serif',\r\n        'Montserrat, sans-serif', 'Poppins, sans-serif', 'Inter, sans-serif'\r\n      ]\r\n    }\r\n  },\r\n  policies: {\r\n    courseAccess: {\r\n      type: String,\r\n      required: true,\r\n      enum: ['open', 'restricted', 'role-based'],\r\n      default: 'role-based'\r\n    },\r\n    assessmentPassPercentage: {\r\n      type: Number,\r\n      required: true,\r\n      min: [0, 'Pass percentage must be at least 0'],\r\n      max: [100, 'Pass percentage cannot exceed 100'],\r\n      default: 70\r\n    },\r\n    assessmentMaxAttempts: {\r\n      type: Number,\r\n      required: true,\r\n      min: [1, 'At least 1 attempt required'],\r\n      max: [10, 'Maximum 10 attempts allowed'],\r\n      default: 3\r\n    },\r\n    certificationValidityMonths: {\r\n      type: Number,\r\n      required: true,\r\n      min: [1, 'Validity must be at least 1 month'],\r\n      max: [60, 'Validity cannot exceed 60 months'],\r\n      default: 12\r\n    },\r\n    certificationRenewalRequired: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    learningDeadlineDays: {\r\n      type: Number,\r\n      required: true,\r\n      min: [1, 'Deadline must be at least 1 day'],\r\n      max: [365, 'Deadline cannot exceed 365 days'],\r\n      default: 30\r\n    },\r\n    complianceRequired: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  version: {\r\n    type: Number,\r\n    default: 1\r\n  },\r\n  lastModifiedBy: {\r\n    type: mongoose.Schema.Types.ObjectId,\r\n    ref: 'User',\r\n    required: false\r\n  }\r\n}, {\r\n  timestamps: true,\r\n  versionKey: false\r\n});\r\n\r\n// Increment version on each update\r\norganizationSchema.pre('save', function(next) {\r\n  if (!this.isNew) {\r\n    this.version += 1;\r\n  }\r\n  next();\r\n});\r\n\r\nmodule.exports = mongoose.model('Organization', organizationSchema);"],"file":"Organization.dev.js"}