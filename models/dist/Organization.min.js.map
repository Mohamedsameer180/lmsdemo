{"version":3,"sources":["Organization.js"],"names":["mongoose","require","Schema","name","organizationSchema","type","String","required","maxlength","description","email","contact","match","phone","address","timezone","locale","default","branding","filename","path","uploadedAt","primaryColor","Date","secondaryColor","backgroundColor","fontFamily","enum","policies","courseAccess","assessmentPassPercentage","Number","min","assessmentMaxAttempts","certificationValidityMonths","certificationRenewalRequired","Boolean","max","learningDeadlineDays","complianceRequired","version","ref","lastModifiedBy","timestamps","Types","ObjectId","versionKey","isNew","pre","next","exports","this","module","model"],"mappings":"aAAA,IAAMA,SAAWC,QAAQ,YAAnBD,mBAAmB,IAAAA,SAAzBE,OAAA,CAGEC,KAAM,CADFC,KAAAA,OACJD,SAAM,EAAA,EAAA,iCACJE,MAAMC,EACNC,UAAW,CAAA,IAAM,sCAEjBC,YAAW,CALgCH,KAAAC,OAO7CG,SAAW,EAAE,EAAA,2BACXJ,UAAMC,CADK,IAAA,8CAGXE,QAAAA,CAV2CE,MAAA,CAY7CC,KAASL,OACPI,SAAO,EAAA,EAAA,6BACLL,MAAMC,CAAAA,iBADD,iCAGLM,MAAK,CAJAP,KAAAC,OAMPO,SAAO,EAAA,EAAA,6BACLR,MAAMC,CAAAA,oBADD,wCAGLM,QAAO,CATFP,KAAAC,OAWPQ,SAAS,EAAA,EAAA,uBACPT,UAAMC,CADC,IAAA,0CAAAS,SAAA,CAvBkCV,KAAAC,OA6B7CS,QAAU,MACRV,KAAMC,CACN,MAAA,mBAFQ,sBAAA,kBAGR,gBACS,eADH,aACuB,gBAjCc,eAAA,qBAwC3CU,OAAA,CACAX,KAAAC,OAzC2CW,QAAA,QA2C7CC,KAAQ,CAAA,QAAE,QAAA,QAAA,QAAA,QAAA,QAAA,UAENC,SAAAA,CACAC,KAAI,CACJC,SAAUf,OAJJc,KAAAd,OAMRgB,WAAcC,MAEZhB,aAAU,CACVK,KAAKN,OATCC,UAAA,EAWRiB,MAAAA,CAAAA,qCAAgB,sBAEdjB,eAFc,CAGdK,KAAKN,OAdCC,UAAA,EAgBRkB,MAAAA,CAAAA,qCAAiB,sBAEflB,gBAFe,CAGfK,KAAKN,OAnBCC,UAAA,EAqBRmB,MAAAA,CAAU,qCAAE,sBAEVnB,WAAU,CACVF,KAAAC,OAHUC,UAAA,EAhE+BoB,KAAA,CAyE7CC,qBAAU,wBAAA,mBACRC,yBAAc,sBAAA,uBAIZD,SAAA,CAJYC,aADN,CAORC,KAAAA,OACEzB,UAAM0B,EACNxB,KAAAA,CAAAA,OAFwB,aAAA,cAGxByB,QAAS,cAETF,yBAAS,CAZHzB,KAAA0B,OAcRE,UAAAA,EACE5B,IAAI,CAAE0B,EAAAA,sCACNxB,IAAAA,CAAAA,IAAU,qCACVyB,QAAS,IAETC,sBAAS,CAnBH5B,KAAA0B,OAqBRG,UAAAA,EACE7B,IAAI,CAAE0B,EAAAA,+BACNxB,IAAAA,CAAAA,GAAU,+BACVyB,QAAS,GAETE,4BAAS,CA1BH7B,KAAA0B,OA4BRI,UAAAA,EACE9B,IAAI,CAAE+B,EAAAA,qCACNC,IAAA,CAAA,GAAA,oCA9BMpB,QAAA,IAiCNZ,6BADoB,CAEpBE,KAAAA,QACAyB,SAAS,GAETM,qBAAS,CArCHjC,KAAA0B,OAuCRQ,UAAAA,EACElC,IAAI,CAAE+B,EAAAA,mCACNC,IAAA,CAAA,IAAS,mCAFSpB,QAAA,IAKtBuB,mBAAS,CACPnC,KAAM0B,QACNd,SAAS,IAGTZ,QAAML,CACNyC,KAAKV,OACLxB,QAAQ,GA5HemC,eA8HxB,CACDC,KAAAA,SADCzC,OAAA0C,MAAAC,SAEDC,IAAAA,OAGFvC,UAAA,IACAH,CACEuC,YAAUI,EACRD,YAAKN,IAGRpC,mBALD4C,IAAA,OAAA,SAAAC,GAOOC,KAAAA,QALHC,KAAKX,SAAW,GAElBS,MAGFG,OAAOF,QAAUlD,SAASqD,MAAM,eAAgBjD","file":"Organization.min.js","sourcesContent":["const mongoose = require('mongoose');\r\n\r\nconst organizationSchema = new mongoose.Schema({\r\n  name: {\r\n    type: String,\r\n    required: [true, 'Organization name is required'],\r\n    trim: true,\r\n    maxlength: [100, 'Name cannot exceed 100 characters']\r\n  },\r\n  description: {\r\n    type: String,\r\n    required: [true, 'Description is required'],\r\n    maxlength: [1000, 'Description cannot exceed 1000 characters']\r\n  },\r\n  contact: {\r\n    email: {\r\n      type: String,\r\n      required: [true, 'Contact email is required'],\r\n      match: [/^\\S+@\\S+\\.\\S+$/, 'Please provide a valid email']\r\n    },\r\n    phone: {\r\n      type: String,\r\n      required: [true, 'Contact phone is required'],\r\n      match: [/^[\\d\\s\\-\\+\\(\\)]+$/, 'Please provide a valid phone number']\r\n    },\r\n    address: {\r\n      type: String,\r\n      required: [true, 'Address is required'],\r\n      maxlength: [500, 'Address cannot exceed 500 characters']\r\n    }\r\n  },\r\n  timezone: {\r\n    type: String,\r\n    default: 'UTC',\r\n    enum: [\r\n      'UTC', 'America/New_York', 'America/Los_Angeles', 'America/Chicago',\r\n      'Europe/London', 'Europe/Paris', 'Asia/Tokyo', 'Asia/Shanghai',\r\n      'Asia/Kolkata', 'Australia/Sydney'\r\n    ]\r\n  },\r\n  locale: {\r\n    type: String,\r\n    default: 'en-US',\r\n    enum: ['en-US', 'en-GB', 'es-ES', 'fr-FR', 'de-DE', 'ja-JP', 'zh-CN']\r\n  },\r\n  branding: {\r\n    logo: {\r\n      filename: String,\r\n      path: String,\r\n      uploadedAt: Date\r\n    },\r\n    primaryColor: {\r\n      type: String,\r\n      required: true,\r\n      match: [/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/, 'Invalid hex color']\r\n    },\r\n    secondaryColor: {\r\n      type: String,\r\n      required: true,\r\n      match: [/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/, 'Invalid hex color']\r\n    },\r\n    backgroundColor: {\r\n      type: String,\r\n      required: true,\r\n      match: [/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/, 'Invalid hex color']\r\n    },\r\n    fontFamily: {\r\n      type: String,\r\n      required: true,\r\n      enum: [\r\n        'Roboto, sans-serif', 'Open Sans, sans-serif', 'Lato, sans-serif',\r\n        'Montserrat, sans-serif', 'Poppins, sans-serif', 'Inter, sans-serif'\r\n      ]\r\n    }\r\n  },\r\n  policies: {\r\n    courseAccess: {\r\n      type: String,\r\n      required: true,\r\n      enum: ['open', 'restricted', 'role-based'],\r\n      default: 'role-based'\r\n    },\r\n    assessmentPassPercentage: {\r\n      type: Number,\r\n      required: true,\r\n      min: [0, 'Pass percentage must be at least 0'],\r\n      max: [100, 'Pass percentage cannot exceed 100'],\r\n      default: 70\r\n    },\r\n    assessmentMaxAttempts: {\r\n      type: Number,\r\n      required: true,\r\n      min: [1, 'At least 1 attempt required'],\r\n      max: [10, 'Maximum 10 attempts allowed'],\r\n      default: 3\r\n    },\r\n    certificationValidityMonths: {\r\n      type: Number,\r\n      required: true,\r\n      min: [1, 'Validity must be at least 1 month'],\r\n      max: [60, 'Validity cannot exceed 60 months'],\r\n      default: 12\r\n    },\r\n    certificationRenewalRequired: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    learningDeadlineDays: {\r\n      type: Number,\r\n      required: true,\r\n      min: [1, 'Deadline must be at least 1 day'],\r\n      max: [365, 'Deadline cannot exceed 365 days'],\r\n      default: 30\r\n    },\r\n    complianceRequired: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  version: {\r\n    type: Number,\r\n    default: 1\r\n  },\r\n  lastModifiedBy: {\r\n    type: mongoose.Schema.Types.ObjectId,\r\n    ref: 'User',\r\n    required: false\r\n  }\r\n}, {\r\n  timestamps: true,\r\n  versionKey: false\r\n});\r\n\r\n// Increment version on each update\r\norganizationSchema.pre('save', function(next) {\r\n  if (!this.isNew) {\r\n    this.version += 1;\r\n  }\r\n  next();\r\n});\r\n\r\nmodule.exports = mongoose.model('Organization', organizationSchema);"]}